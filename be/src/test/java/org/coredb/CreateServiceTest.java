package org.coredb.registry.test;

import java.util.*;

import org.junit.Test;
import org.junit.FixMethodOrder;
import org.junit.runners.MethodSorters;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.test.context.junit4.SpringRunner;

import static org.junit.Assert.assertNotEquals;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;
import static org.junit.Assert.assertFalse;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.annotation.JsonInclude.Include;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.io.*;
import java.security.*;
import java.security.spec.*;
import java.util.Base64;

import org.coredb.registry.api.AmigoApi;
import org.coredb.registry.model.AmigoMessage;

@RunWith(SpringRunner.class)
@FixMethodOrder(MethodSorters.NAME_ASCENDING)
@SpringBootTest
public class CreateServiceTest {

  @Autowired
  private AmigoApi emigoApi;

  @Test
  public void A_createService() throws Exception {

    ResponseEntity<Void> set;
    AmigoMessage msg = new AmigoMessage();

    msg.setKey("30820222300d06092a864886f70d01010105000382020f003082020a02820201008e7b8cddf770e807188e0b8fabc061f3b88bac9dc64cebda305aca501a74af272079d2b5e826b67e43bdc01ced47a492fedeb05dc5b8638062ae65cf661b4f7d527838c556d68fb19f2e227b4302dff767c79415225a7e8e6b376a7f8f1f92b9b8699eb1c8562199a571ebe99188335348cd0f7746e799c81eb7705a777b1c77031e5561c8506ff3a8093520799555f177010e2001a565c2f4b72e4e94617e8cc60cdbfad383cc4dc80cec592dcc59b91023242c861cef951597d6e18d24aee4504ae41effbb88b9aba4dd271c3da8a79179948433244e661ce834d60dd8eea0312ab80014f69ceaa4ddff4f23d895b2514bf2c7176c87101f4fe2718041b10972117359db54bd3f2871ef363da62f50eeedf9d4abd08a346a0a121d396fc085c63abc01c3b1acbfcd0554d642ec21ee0ba8fd922a0c25ec64b6f397da25abebc2de728cffe68f7f563e290d9cec601fa8ecfd6045c39e60a7b6f97655feb3a3f8c956d946b1616f7bc623fe9040cf7195e73362736bf10da26c79bd6d9b3e29e9b3b3236cd7bc1bfdbcb2cbac2d284c41992636449106bb9cc7bd4105679e6bcedb77661c9c9544894479f54cf0d9735c8d2c6aac53f722bc42b9f63a3fefc3727f9a49fb5864262a60ab2c045e18ababcbe1464f54c5ba672d82a65bf25ab30c7292aea67f341d6af2ee6b3b45a4f6dae5b1de8ed4f3d51442892103ad5e1d0203010001");
    msg.setKeyType("RSA");
    msg.setSignature("565f19b9a8e88f3ddab9b054a694244233f18dc80cab75fd51a3772092dbafc566c2e29425d372f6624eea8cbedc358ad38dd3ea7acefa60fdb426d970467028eec8a1f877b1dc02fbc2c281f0195329eb9934f88f8f7685ee587ff1424060d23bf3dfe531a4c221f67e04340b90b7bdb7d5327f197a592811ab2b4b0695a58565f936d7183c3c4a92179067b3f90fe278d5379657340fb36700b325737daceb0f6d8ddee225cbd032ac5221bb7e01a485d8941730296885d754c832292a525ec8938b6e7a0a37b4d6fdf2f2f58dab715366cea1530f15463c0cc2115d940d3703ce52283d4a8c88657c3926d70b1c81c26c1a3d22acd1b4e6681fa79a64fa6d2602a0653a82fd09b0c87fe678ebc435f5532d587a07c674c68ed185d626d61b8ae7fa9dc663eda411604cfaa63328f7fb596d45b48fcead75f24d133a7db45c3bef22c858b2f049bb4f421ead31717338315ff65519b876dc65d09cbca58ec2b9af1b931f7f1fcd71e847dced05fdc99e16cc814cb3aa77c9f56a1104630ba25c9368f76cfd8c526b0e058926c0103969fad2d806d328a50523589eb07e417e145918bae1a0d26e2cb3cba15e1e367f0be61e93ac1400a19798d26fec4a5e9e8c4a7ac468a83088f0601fb83217e6451c724a0673afaede5438d6822ab2d9afb107a08bc3d1f29cbe54451174c94d5627a4ea0fbe2f57294104643880dcd4a5");
    msg.setData("eyJlbWlnb0lkIjoiZDA4NTVhNDZiZDFmMDJjMDA4ODJjMTE0OTM0NTQ2NGQ1YTNkZTUyMTNlZDBlNDJlYTVlNTQxYTlhMjNkZWZlMyIsIm5vZGUiOiJodHRwczovL2FwcHMucWEuY29yZWRiLm9yZzo0NDMvc3NpIiwicmVnaXN0cnkiOiJodHRwczovL3JlZ2lzdHJ5LnFhLmNvcmVkYi5vcmcvYXBwIiwicmV2aXNpb24iOjIsInZlcnNpb24iOiIwLjEuNSIsImhhbmRsZSI6ImFwcHMifQ==");
    set = emigoApi.setMessage(msg);
    assertEquals(HttpStatus.BAD_REQUEST, set.getStatusCode());
  }

}

